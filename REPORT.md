# Отчет по исправлениям utils.py

## Цели

- Устранить уязвимости и сделать код рабочим.
- Обеспечить безопасные SQL‑операции и корректную обработку ошибок.
- Подготовить запуск из терминала без дополнительных зависимостей.

## Что было исправлено

- Убраны хардкод‑пароли и любые чувствительные данные из кода.
- Исключены SQL‑инъекции: все запросы переведены на параметризованные.
- Добавлена строгая валидация ввода:
  - `username` разрешает только безопасный набор символов и длину 3–32.
  - `id` проверяется как положительное целое число.
- Удалены глобальные изменяемые состояния.
- Исправлено управление соединениями:
  - соединение открывается через контекст и гарантированно закрывается.
- Улучшена обработка ошибок:
  - не раскрывается SQL‑запрос и внутренние детали.
  - отдельная обработка конфликтов `UNIQUE` (дублирование username).
- Структурирован CLI‑интерфейс, добавлены сообщения об ошибках ввода.
- Инициализация БД и таблицы выполняется корректно и безопасно.

## Итог

Код `utils.py` теперь безопасен, стабильно работает и запускается в терминале.
